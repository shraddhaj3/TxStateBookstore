<%@ page import="txstatebookstore.Book" %>
<!DOCTYPE html>
<html>
	<head>
		<meta name="layout" content="main">
		<title>My Shopping Cart</title>
	</head>
	<body>
		<div style="margin: 20px;">	
			<h1>My Shopping Cart</h1>
			<a href="#list-book" class="skip" tabindex="-1"><g:message code="default.link.skip.label" default="Skip to content&hellip;"/></a>
			<g:if test="${session.myCart == null || session.myCart.isEmpty() }">
				<h3>Your shopping cart is empty!</h3>
			</g:if>
			<g:else>
				<h1>Items in your cart</h1>
				<table>
					<thead>
						<tr>
							<td>Book</td>
							<td>Price</td>
							<td>Quantity</td>
							<td>Actions</td>
						</tr>
					</thead>
					<tbody>
						<g:each in="${cart}" var="item">
							<tr>
								<td>
										<td><span><img width="100px" src="${createLink(controller:'Book', action:'showPayload', id: item.key)}"/></span></td>
										<td><b><g:link controller="Book" action="show" id="${item.key}">${item.value.title }</g:link></b>
										<br/>
										ISBN: ${item.value.isbn }
										<br/>
										</td>
								</td>
								<td>
									<b>$ ${item.value.price }</b>
								</td>
								<td>
										<g:link controller="Book" action="addToCart" id="${book.id }">Add to Cart</g:link>
								</td>
							</tr>
						</g:each>
					</tbody>
				</table>
				
				<g:each in="${cart }" var="item">
					${item.value}
				</g:each>
			</g:else>
		</div>
	</body>
</html>